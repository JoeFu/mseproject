<!-- /**
* Created by PhpStorm.
* User: Joe Fu
* Date: 1/4/2017
* Time: 11:32 PM
*/ -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../favicon.ico">

    <title>Dashboard</title>

    <!-- Bootstrap core CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="../css/dashboard1.css" rel="stylesheet">
    <!--Baidu Echarts JS control-->
    <script src="../js/echarts.js"></script>

	  <link rel="stylesheet" href="../js/jquery-ui.min.css">
	  	  <link rel="stylesheet" href="../js/jquery-ui.structure.min.css">
		  	  <link rel="stylesheet" href="../js/jquery-ui.theme.min.css">
	  	<script type="text/javascript" src="../js/jquery-3.2.1.js"></script>
  <script src="../js/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="../js/jquery-ui-AutoComplete.css">
  <script src="../js/jquery-ui-AutoComplete.js"></script>

</head>

<body>
<nav class="navbar navbar-toggleable-md navbar-inverse fixed-top bg-inverse">
    <button class="navbar-toggler navbar-toggler-right hidden-lg-up" type="button" data-toggle="collapse"
            data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false"
            aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" href="#">Dashboard</a>

    <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="../index.html">Back</a>
            </li>
        </ul>
        <form class="form-inline mt-2 mt-md-0">
            <input class="form-control mr-sm-2" type="text" placeholder="Search">
            <button class="btn btn-info" type="submit">Search</button>

        </form>
    </div>
</nav>

<div class="container-fluid">
    <div class="row">
        <nav class="col-sm-3 col-md-2 hidden-xs-down bg-faded sidebar">
            <ul class="nav nav-pills flex-column">

                <li class="nav-item">
                    <a class="nav-link " href="./index.html">Moodle charts<span class="sr-only">(current)</span></a>
                </li>
				<li class="nav-item">
                    <a class="nav-link" href="MoodleChartsAcrossSemesters.html">Moodle Charts （across semesters)</a>
                </li>
				<li class="nav-item">
                    <a class="nav-link active" href="WebSubmissionCharts.html">WebSubmission charts</a>
                </li>
            </ul>


        </nav>

        <main class="col-sm-9 offset-sm-3 col-md-10 offset-md-2 pt-3">
             <h1>Dashboard</h1>
				  	<select id="SelectCourse">
						  <option  id="PleaseSelectCourse">Select course</option>

						</select>
						<select id="SelectYear">
						  <option  id="PleaseSelectYear">SelectYear</option>
						</select>
						<select id="SelectSemester">
						  <option  id="PleaseSelectSemester">SelectSemester</option>
						</select>
						<select id="SelectAssignment">
						  <option  id="PleaseSelectAssignment">SelectAssignment</option>
						</select>


    <script type="text/javascript">


$(document).ready(function() {
  
  //Load data for select course
	$.ajax({
		type: "get",
		async: true, 
		url: "controller.php?type=loadCourse",
		dataType: "json", 
		success: function(result) {
			//console.log(result);
			var CourseName = [];
			$.each(result,function(i,p){
			  CourseName[i]=p['CourseName'];
			  $("#SelectCourse").append(
              " <option id='" + CourseName[i] + "'>"
              + CourseName[i] + "</option>");
			});
		}
	});

	//When users select course, load options for "select year"
	 $("#SelectCourse").change(function() {
				// When users select course, remove all options in year and semester
				$("#SelectYear option").remove();
				$("#SelectSemester option").remove();
				$("#SelectAssignment option").remove();
				$("#SelectYear").append(
					" <option id='PleaseSelectYear'>SelectYear</option>");
				$("#SelectSemester").append(
					" <option id='PleaseSelectSemester'>SelectSemester</option>");
				$("#SelectAssignment").append(
					" <option id='PleaseSelectAssignment'>SelectAssignment</option>");
				 //Get the course user chooses
				var SelectCourseId=$("#SelectCourse option:selected").attr("id");
				 $.ajax({
					type: "get",
					async: true, 
					url: "controller.php?type=loadYear",
					dataType: "json", 
					data: {"SelectCourseId":SelectCourseId},
					success: function(result) {
						var SchoolYear = [];
						$.each(result,function(i,p){
						  SchoolYear[i]=p['SchoolYear'];
						  $("#SelectYear").append(
						  " <option id='" + SchoolYear[i] + "'>"
						  + SchoolYear[i] + "</option>");
						});
					}
				});//ajax
		});//change()

	//When users select course and year, load options for "select semester"
	 $("#SelectYear").change(function() {
				// When users select course and year, remove all options in semester
				$("#SelectSemester option").remove();
				$("#SelectAssignment option").remove();
				$("#SelectSemester").append(
					" <option id='PleaseSelectSemester'>SelectSemester</option>");
				$("#SelectAssignment").append(
					" <option id='PleaseSelectSemester'>SelectAssignment</option>");
				 //Get the course and year user chooses
				var SelectCourseId=$("#SelectCourse option:selected").attr("id");
				var SelectYearId=$("#SelectYear option:selected").attr("id");
				 $.ajax({
					type: "get",
					async: true, 
					url: "controller.php?type=loadSemester",
					dataType: "json", 
					data: {"SelectCourseId":SelectCourseId,"SelectYearId":SelectYearId},
					success: function(result) {
						var Semester = [];
						$.each(result,function(i,p){
						  Semester[i]=p['Semester'];
						  $("#SelectSemester").append(
						  " <option id='" + Semester[i] + "'>"
						  + Semester[i] + "</option>");
						});
					}
				});//ajax
		});//change()

	//When users select course, year, semester load options for "select assignment"
	 $("#SelectSemester").change(function() {
				// When users select course and year, remove all options in semester
				$("#SelectAssignment option").remove();
				$("#SelectAssignment").append(
					" <option id='PleaseSelectSemester'>SelectAssignment</option>");
				 //Get the course and year user chooses
				var SelectCourseId=$("#SelectCourse option:selected").attr("id");
				var SelectYearId=$("#SelectYear option:selected").attr("id");
				var SelectSemesterId=$("#SelectSemester option:selected").attr("id");				
				 $.ajax({
					type: "get",
					async: true, 
					url: "controller.php?type=loadAssignment",
					dataType: "json", 
					data: {"SelectCourseId":SelectCourseId,"SelectYearId":SelectYearId,"SelectSemesterId":SelectSemesterId},
					success: function(result) {
						var AssignmentName = [];
						$.each(result,function(i,p){
						  AssignmentName[i]=p['AssignmentName'];
						  $("#SelectAssignment").append(
						  " <option id='" + AssignmentName[i] + "'>"
						  + AssignmentName[i] + "</option>");
						});
					}
				});//ajax
		});//change()






	})//DocumentReady()


//after user chooses assignment, update all charts
$(document).ready(function(){ 

		$('#SelectAssignment').change(function(){
		
		SubmissionTimeDistribution5Days();
		SubmissionTimeDistribution96Hours();
		FirstSubmissionTimeDistribution();
		LastSubmissionTimeDistribution();
		MarkDistributionUpdate();
		SubmissionTimesOfEachStudentUpdate();
		}) 
		}) 
  </script>

<!-- the chart SubmissionTimeDistribution 5 days after and before deadline-->
<div id="SubmissionTimeDistribution5Days" style="width: 800px;height:400px;"></div>
<div style="width: 200px;height:100px;position: relative; top: -400px;left: 870px;"></div>
    <script type="text/javascript">
        //initialize echarts instance
        var myChartSubmissionTimeDistribution5Days = echarts.init(document.getElementById('SubmissionTimeDistribution5Days'));

        // configuration and data of chart
        var option = {
            title: {
                text: 'Submission Time Distribution 5 Days'
            },
            tooltip: {},
            xAxis: {
                data: []
            },
            yAxis: {
				name: 'Amount of submission',
			},
			dataZoom: [
				{   // dataZoom component controls x-axis by default
					type: 'slider', 
					start: 0,      // left
					end: 100         // right
				}
			],
            series: [
				{
					name: 'Amount of submission',
					type: 'bar',
					data: []

				}

			],
			toolbox: {
				show: true,
				feature: {
					dataView: {readOnly: false},
					magicType: {type: ['line', 'bar']},
					restore: {},
					saveAsImage: {}
				}
			}
        };


        myChartSubmissionTimeDistribution5Days.setOption(option);

		function SubmissionTimeDistribution5Days(){

		var SelectCourse=$("#SelectCourse option:selected").attr("id");
		var SelectYear=$("#SelectYear option:selected").attr("id");
		var SelectSemester=$("#SelectSemester option:selected").attr("id");
		var SelectAssignment=$("#SelectAssignment option:selected").attr("id");

		$.ajax({
			type: "get",
			async: true, 
			url: "controller.php?type=submissionTimeDistribution5Days",
			data: {"SelectCourse":SelectCourse,"SelectYear":SelectYear,"SelectSemester":SelectSemester,"SelectAssignment":SelectAssignment},
			dataType: "json", 
			success: function(result) {
				var days = [];
				var count = [];
				var dueDate = [];
				$.each(result,function(i,p){
				  days[i]=p['days'];
				  count[i]=p['count'];
				  dueDate[i]=p['dueDate'];
				});
				myChartSubmissionTimeDistribution5Days.hideLoading();
				myChartSubmissionTimeDistribution5Days.setOption({
					xAxis: {
						axisLabel :{
							interval: 'auto', 
							rotate:0
						},
						name: 'Day',
						data: days,

	
					},

					series: [
						{
						
							name: 'Amount of submission',
							data: count,
							markArea: {
								data: [ 
									[{
									name: 'Due day',
									xAxis: 5
								}, {
									xAxis: 5
								}]

								]
							},
							markLine : {
								label:{
									normal:{
										show:false
									
									}
								},
								lineStyle: {
									normal: {
										type: 'solid'
									}
								},
								data : [
	
									{ xAxis: 5 }
								]
							}//markLine

						}
					]
				});
			}
		})//ajax
		}//function SubmissionTimeDistribution5Days



   </script>

<!-- the chart SubmissionTimeDistribution 96 hours after and before deadline-->
<div id="SubmissionTimeDistribution96Hours" style="width: 800px;height:400px;"></div>
<div style="width: 200px;height:100px;position: relative; top: -400px;left: 870px;"></div>
    <script type="text/javascript">
        //initialize echarts instance
        var myChartSubmissionTimeDistribution96Hours = echarts.init(document.getElementById('SubmissionTimeDistribution96Hours'));

        // configuration and data of chart
        var option = {
            title: {
                text: 'Submission Time Distribution 96 Hours'
            },
            tooltip: {},
            xAxis: {
                data: []
            },
            yAxis: {
				name: 'Amount of submission',
			},
			dataZoom: [
				{   // dataZoom component controls x-axis by default
					type: 'slider', 
					start: 0,      // left
					end: 100         // right
				}
			],
            series: [
				{
					name: 'Amount of submission',
					type: 'bar',
					data: []

				}

			],
			toolbox: {
				show: true,
				feature: {
					dataView: {readOnly: false},
					magicType: {type: ['line', 'bar']},
					restore: {},
					saveAsImage: {}
				}
			}
        };


        myChartSubmissionTimeDistribution96Hours.setOption(option);

		function SubmissionTimeDistribution96Hours(){

		var SelectCourse=$("#SelectCourse option:selected").attr("id");
		var SelectYear=$("#SelectYear option:selected").attr("id");
		var SelectSemester=$("#SelectSemester option:selected").attr("id");
		var SelectAssignment=$("#SelectAssignment option:selected").attr("id");

		$.ajax({
			type: "post",
			async: true, 
			url: "SubmissionTimeDistribution96Hours.php",
			data: {"SelectCourse":SelectCourse,"SelectYear":SelectYear,"SelectSemester":SelectSemester,"SelectAssignment":SelectAssignment},
			dataType: "json", 
			success: function(result) {
				var days = [];
				var count = [];
				$.each(result,function(i,p){
				  days[i]=p['days'];
				  count[i]=p['count'];
				});
				myChartSubmissionTimeDistribution96Hours.hideLoading();
				myChartSubmissionTimeDistribution96Hours.setOption({
					xAxis: {
						axisLabel :{
							interval: 'auto', 
							rotate:0
						},
						name: 'Hour',
						data: days,

	
					},

					series: [
						{
						
							name: 'Amount of submission',
							data: count,

						}
					]
				});
			}
		})//ajax
		}//function SubmissionTimeDistribution96Hours



   </script>


<!-- the chart FirstSubmissionTimeDistribution -->
<div id="FirstSubmissionTimeDistribution" style="width: 800px;height:400px;"></div>
<div style="width: 200px;height:100px;position: relative; top: -400px;left: 870px;"></div>
    <script type="text/javascript">
        //initialize echarts instance
        var myChartFirstSubmissionTimeDistribution= echarts.init(document.getElementById('FirstSubmissionTimeDistribution'));

        // configuration and data of chart
        var option = {
            title: {
                text: 'First Submission Time Distribution'
            },
            tooltip: {},
            xAxis: {
                data: []
            },
            yAxis: {
				name: 'Amount of submission',
			},
			dataZoom: [
				{   // dataZoom component controls x-axis by default
					type: 'slider', 
					start: 0,      // left
					end: 100         // right
				}
			],
            series: [
				{
					name: 'Amount of submission',
					type: 'bar',
					data: []

				}

			],
			toolbox: {
				show: true,
				feature: {
					dataView: {readOnly: false},
					magicType: {type: ['line', 'bar']},
					restore: {},
					saveAsImage: {}
				}
			}
        };


        myChartFirstSubmissionTimeDistribution.setOption(option);

		function FirstSubmissionTimeDistribution(){

		var SelectCourse=$("#SelectCourse option:selected").attr("id");
		var SelectYear=$("#SelectYear option:selected").attr("id");
		var SelectSemester=$("#SelectSemester option:selected").attr("id");
		var SelectAssignment=$("#SelectAssignment option:selected").attr("id");

		$.ajax({
			type: "post",
			async: true, 
			url: "FirstSubmissionTimeDistribution.php",
			data: {"SelectCourse":SelectCourse,"SelectYear":SelectYear,"SelectSemester":SelectSemester,"SelectAssignment":SelectAssignment},
			dataType: "json", 
			success: function(result) {
				var days = [];
				var count = [];
				$.each(result,function(i,p){
				  days[i]=p['days'];
				  count[i]=p['count'];
				});
				myChartFirstSubmissionTimeDistribution.hideLoading();
				myChartFirstSubmissionTimeDistribution.setOption({
					xAxis: {
						axisLabel :{
							interval: 'auto', 
							rotate:0
						},
						name: 'Day',
						data: days,

	
					},

					series: [
						{
						
							name: 'Amount of submission',
							data: count,
							markArea: {
								data: [ 
									[{
									name: 'Start day',
									xAxis: 0
								}, {
									xAxis: 0
								}],
								[{
									name: 'Due day',
									xAxis: 31
								}, {
									xAxis: 31
								}]

								]
							},
							markLine : {
								label:{
									normal:{
										show:false
									
									}
								},
								lineStyle: {
									normal: {
										type: 'solid'
									}
								},
								data : [
	
									{ xAxis: 0 },
									{ xAxis: 31 }
								]
							}//markLine

						}
					]
				});
			}
		})//ajax
		}//function FirstSubmissionTimeDistribution



   </script>


<!-- the chart LastSubmissionTimeDistribution -->
<div id="LastSubmissionTimeDistribution" style="width: 800px;height:400px;"></div>
<div style="width: 200px;height:100px;position: relative; top: -400px;left: 870px;"></div>
    <script type="text/javascript">
        //initialize echarts instance
        var myChartLastSubmissionTimeDistribution= echarts.init(document.getElementById('LastSubmissionTimeDistribution'));

        // configuration and data of chart
        var option = {
            title: {
                text: 'Last Submission Time Distribution'
            },
            tooltip: {},
            xAxis: {
                data: []
            },
            yAxis: {
				name: 'Amount of submission',
			},
			dataZoom: [
				{   // dataZoom component controls x-axis by default
					type: 'slider', 
					start: 0,      // left
					end: 100         // right
				}
			],
            series: [
				{
					name: 'Amount of submission',
					type: 'bar',
					data: []

				}

			],
			toolbox: {
				show: true,
				feature: {
					dataView: {readOnly: false},
					magicType: {type: ['line', 'bar']},
					restore: {},
					saveAsImage: {}
				}
			}
        };


        myChartLastSubmissionTimeDistribution.setOption(option);

		function LastSubmissionTimeDistribution(){

		var SelectCourse=$("#SelectCourse option:selected").attr("id");
		var SelectYear=$("#SelectYear option:selected").attr("id");
		var SelectSemester=$("#SelectSemester option:selected").attr("id");
		var SelectAssignment=$("#SelectAssignment option:selected").attr("id");

		$.ajax({
			type: "post",
			async: true, 
			url: "LastSubmissionTimeDistribution.php",
			data: {"SelectCourse":SelectCourse,"SelectYear":SelectYear,"SelectSemester":SelectSemester,"SelectAssignment":SelectAssignment},
			dataType: "json", 
			success: function(result) {
				var days = [];
				var count = [];
				$.each(result,function(i,p){
				  days[i]=p['days'];
				  count[i]=p['count'];
				});
				myChartLastSubmissionTimeDistribution.hideLoading();
				myChartLastSubmissionTimeDistribution.setOption({
					xAxis: {
						axisLabel :{
							interval: 'auto', 
							rotate:0
						},
						name: 'Day',
						data: days,

	
					},

					series: [
						{
						
							name: 'Amount of submission',
							data: count,

						}
					]
				});
			}
		})//ajax
		}//function LastSubmissionTimeDistribution
   </script>


<!-- the chart "Submission Times Of Each Student"-->
<div id="SubmissionTimesOfEachStudent" style="width: 800px;height:400px;"></div>
<div style="width: 200px;height:100px;position: relative;
					  top: -400px;
					  left: 870px;">
					  <label for="SubmissionTimesOfEachStudentSelect">Change Presentation Order</label>
					  	<select id="SubmissionTimesOfEachStudentSelect">
						  <option  value ="1" selected = "selected">Alphabetical order</option>
						  <option value ="2">Descending order</option>
						  <option value="3">Ascending order</option>
						</select></br></br>
					</div>

    <script type="text/javascript">
        // initialize echarts instance
        var myChartSubmissionTimesOfEachStudent = echarts.init(document.getElementById('SubmissionTimesOfEachStudent'));

        // set configuration items and data
        var option = {
            title: {
                text: 'Submission Times Of Each Student'
            },
            tooltip: {},
            xAxis: {
                data: []
            },
            yAxis: {
				name: 'Submission Times'
			},
			dataZoom: [
				{   //dataZoom component controls x-axis by default
					type: 'slider', 
					start: 0,      // left position 0%
					end: 100         // right position 100%
				}
			],
            series: [{
                name: 'Submission Times',
                type: 'bar',
                data: []
            }],
			toolbox: {
				show: true,
				feature: {
					dataView: {readOnly: false},
					magicType: {type: ['line', 'bar']},
					restore: {},
					saveAsImage: {}
				}
			}
        };

        // display chart using the configuration items and data set

        myChartSubmissionTimesOfEachStudent.setOption(option);

		function SubmissionTimesOfEachStudentUpdate(){

		var order=$('#SubmissionTimesOfEachStudentSelect').val();
		var SelectCourse=$("#SelectCourse option:selected").attr("id");
		var SelectYear=$("#SelectYear option:selected").attr("id");
		var SelectSemester=$("#SelectSemester option:selected").attr("id");
		var SelectAssignment=$("#SelectAssignment option:selected").attr("id");

		$.ajax({
			type: "post",
			async: true, //asynchronous
			url: "SubmissionTimesOfEachStudent.php",
			data: {"SelectCourse":SelectCourse,"SelectYear":SelectYear,"SelectSemester":SelectSemester,"SelectAssignment":SelectAssignment,"order":order},
			dataType: "json", //return data in JSON format
			success: function(result) {
				var FKUserId = [];
				var count = [];
				$.each(result,function(i,p){
				  FKUserId[i]=p['FKUserId'];
				  count[i]=p['count'];
				});
				myChartSubmissionTimesOfEachStudent.hideLoading();
				myChartSubmissionTimesOfEachStudent.setOption({
					xAxis: {
						axisLabel :{
							interval: 'auto', 
							rotate:0
						},
						name: 'User name',
						data: FKUserId
					},

					series: [{
						name: 'Amount of activities',
						data: count
					}]
				});
			}
		});
		}

		//When user changes the presentation order, undate the chart "Submission Times Of Each Student"
		$(document).ready(function(){ 
				$('#SubmissionTimesOfEachStudentSelect').change(function(){ 
					SubmissionTimesOfEachStudentUpdate();
				}) 
		}) 
   </script>


   <div id="SubmissionTimeDistribution" style="width: 800px;height:400px;"></div>
<div style="width: 200px;height:100px;position: relative;
					  top: -400px;
					  left: 870px;">

					</div>
    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChartSubmissionTimeDistribution = echarts.init(document.getElementById('SubmissionTimeDistribution'));

        // 指定图表的配置项和数据
        var option = {
            title: {
                text: 'Submission Time Distribution'
            },
            tooltip: {},
            /*legend: {
                data:['Amount of activities']
            },*/
            xAxis: {
                data: []
            },
            yAxis: {
				name: 'Amount of submission',
			},
			dataZoom: [
				{   // 这个dataZoom组件，默认控制x轴。
					type: 'slider', // 这个 dataZoom 组件是 slider 型 dataZoom 组件
					start: 0,      // 左边在 10% 的位置。
					end: 100         // 右边在 60% 的位置。
				}
			],
            series: [{
                name: 'Amount of submission',
                type: 'bar',
                data: []

            }],
			toolbox: {
				show: true,
				feature: {
					dataView: {readOnly: false},
					magicType: {type: ['line', 'bar']},
					restore: {},
					saveAsImage: {}
				}
			}
        };

        // 使用刚指定的配置项和数据显示图表。

        myChartSubmissionTimeDistribution.setOption(option);

		function SubmissionTimeDistribution(){
		$.ajax({
			type: "post",
			async: true, //异步执行
			url: "SubmissionTimeDistribution.php",
			dataType: "json", //返回数据形式为json
			success: function(result) {
				console.log(result);
				var days = [];
				var count = [];
				$.each(result,function(i,p){
				  days[i]=p['days'];
				  count[i]=p['count'];
				});
				myChartSubmissionTimeDistribution.hideLoading();
				myChartSubmissionTimeDistribution.setOption({
					xAxis: {
						axisLabel :{
							interval: 'auto', 
							rotate:0
						},
						name: 'Day',
						data: days,
	
					},

					series: [{
						// 根据名字对应到相应的系列
						name: 'Amount of submission',
						data: count,
						markArea: {
							data: [ [{
								name: 'Deadline',
								xAxis: '20121106'
							}, {
								xAxis: '20121106'
							}]]
						},
						markLine : {
							label:{
								normal:{
									show:false
								
								}
							},
							lineStyle: {
								normal: {
									type: 'solid'
								}
							},
							data : [
								
								{ xAxis: '20121106' }
							]
						}
							  
							  
							  
							
					}]
				});
			}
		})//ajax
		}//function SubmissionTimeDistribution

		SubmissionTimeDistribution();

   </script>


<div id="MarkDistribution" style="width: 800px;height:400px;"></div>
<div style="width: 200px;height:100px;position: relative;
					  top: -400px;
					  left: 870px;">
<label for="MarkDistributionSelect">Configuration option </label>
					  	<select id="MarkDistributionSelect">
						  <option  value ="1" selected = "selected">By GPA</option>
						  <option value ="2">By 10% step</option>
						</select>
					</div>
    <script type="text/javascript">
        // initialize echart instance
        var myChartMarkDistribution = echarts.init(document.getElementById('MarkDistribution'));

        // configure items and data
        var option = {
            title: {
                text: 'Mark Distribution'
            },
            tooltip: {},
            xAxis: {
                data: []
            },
            yAxis: {
				name: 'Number of students'
			},
			dataZoom: [
				{   //dataZoom component controls x-axis by default
					type: 'slider', 
					start: 0,      // left position 0% 
					end: 100         // right position 100% 
				}
			],
            series: [{
                name: 'Mark',
                type: 'bar',
                data: []
            }],
			toolbox: {
				show: true,
				feature: {
					dataView: {readOnly: false},
					magicType: {type: ['line', 'bar']},
					restore: {},
					saveAsImage: {}
				}
			}
        };

        // display chart using the configuration items and data set

        myChartMarkDistribution.setOption(option);

		function MarkDistributionUpdate(){
		
		var SelectCourse=$("#SelectCourse option:selected").attr("id");
		var SelectYear=$("#SelectYear option:selected").attr("id");
		var SelectSemester=$("#SelectSemester option:selected").attr("id");
		var SelectAssignment=$("#SelectAssignment option:selected").attr("id");

		var MarkDistributionSelect=$('#MarkDistributionSelect').val();

		$.ajax({
			type: "post",
			async: true, //asynchronous
			url: "MarkDistribution.php",
			data: {"SelectCourse":SelectCourse,"SelectYear":SelectYear,"SelectSemester":SelectSemester,"SelectAssignment":SelectAssignment,"MarkDistributionSelect":MarkDistributionSelect},
			dataType: "json", //return data in JSON format
			success: function(result) {
				var grade = [];
				var count = [];
				$.each(result,function(i,p){
				  grade[i]=p['grade'];
				  count[i]=p['count'];
				});
				myChartMarkDistribution.hideLoading();
				myChartMarkDistribution.setOption({
					xAxis: {
						axisLabel :{
							interval: 'auto', 
							rotate:0
						},
						name: 'Mark',
						data: grade
					},

					series: [{
						name: 'Number of students',
						data: count
					}]
				});
			}
		});
		}
		//after user chooses configuration option for Mark Distribution Chart, update the Mark Distribution Chart
		$(document).ready(function(){ 

				$('#MarkDistributionSelect').change(function(){ 
					MarkDistributionUpdate();
				}) 
		}) 
   </script>




        

           </main>
    </div>
</div>

<!-- Footer  -->

<script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"
        integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb"
        crossorigin="anonymous"></script>
<script src="../js/bootstrap.min.js"></script>
<script src="../js/ie10-viewport-bug-workaround.js"></script>
</body>
</html>